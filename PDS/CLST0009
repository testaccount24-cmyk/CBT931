 /* CLST0009. THIS CLIST WILL EXECUTE THE TSO COMMAND LISTDS */
 /* AND CAPTURE THE OUTPUT THAT IS NORMALLY DISPLAYED AT THE TERMINAL */
 /* THIS EXAMPLE DISPLAYS THE CAPTURED DATA.     */
 /* YOU CAN DO OTHER THINGS WITH THE CAPTURED DATA */
 /* IN THIS EXAMPLE, THE DATASET DOES NOT EXIST    */
 CONTROL NOFLUSH  /* NOTE 1 */   /* DON'T TERMINATE IF ERROR      */
 SET SYSOUTTRAP = 100            /* ARBITRARILY CHOOSING 100 LINES.*/
                                 /* YOU CAN USE A DIFFERENT VALUE */
 LISTDS  'USERID.TEST1.CLIST'    /* USE A VALID DATASET NAME HERE */
 WRITE &LASTCC WAS RETURN CODE FROM LISTDS COMMAND /* NOTE 2 */
 SET SYSOUTTRAP = 0              /* TURN OFF CAPTURING. */
 SET MAX_RETURNED = &SYSOUTLINE  /* HOW MANY LINES RETURNED */
 SET INDEX= 0
 DO WHILE &INDEX LE &MAX_RETURNED
         SET INDEX = &INDEX + 1         /* INCREMENT INDEX */
         SET CURRENT_LINE = &STR(&&SYSOUTLINE&INDEX)
         WRITE LINE RETRIEVED IS &STR(&CURRENT_LINE)

 END /* END DO WHILE */
