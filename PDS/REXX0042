/* REXX0042 TO ILLUSTRATE ERROR TRAP */
/* A TSO ALLOCATE FAILS, DUE TO WRONG DSN */
/* CONTROL GOES TO ERROR TRAP, WHERE PROGRAM ASKS FOR A GOOD DSN */

CALL ON ERROR
"ALLOCATE DDNAME(INFILE) SHR REUSE DSN(ABC.NOTHERE.DATA)"
CALL OFF ERROR
EXIT

/* FURTHER DOWN THE PROGRAM */
ERROR:
     SAY "CAN'T ALLOCATE FILE"
     SAY "DO YOU WANT TO ENTER A VALID DSN?"
     PULL YN
     IF YN <> "YES" THEN EXIT
     SAY "ENTER VALID DSN"
     PULL DSN
     "ALLOCATE DDNAME(INFILE) SHR REUSE DSN("DSN")"
     RETURN /* GO TO STATEMENT AFTER ONE THAT SENT HERE */

